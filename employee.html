<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Employee Dashboard | StockPro</title>
    <style>
        :root {
            --primary: #2563eb;
            --success: #059669;
            --warning: #f59e0b;
            --danger: #ef4444;
            --bg: #f8fafc;
            --text: #1e293b;
        }

        body { margin: 0; font-family: 'Inter', sans-serif; background: var(--bg); color: var(--text); padding-bottom: 20px; }
        
        header { 
            background: white; border-bottom: 1px solid #e2e8f0; padding: 0.75rem 1rem; 
            display: flex; justify-content: space-between; align-items: center; 
            position: sticky; top: 0; z-index: 10;
        }

        .container { max-width: 1250px; margin: 1rem auto; padding: 0 1rem; display: grid; grid-template-columns: 2.2fr 1fr; gap: 1.5rem; }

        .section-card { background: white; border-radius: 12px; box-shadow: 0 2px 4px rgba(0,0,0,0.05); padding: 1.5rem; height: fit-content; }
        .card-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem; gap: 10px; }
        
        table { width: 100%; border-collapse: collapse; }
        th { text-align: left; padding: 12px; background: #f8fafc; color: #64748b; font-size: 0.7rem; text-transform: uppercase; letter-spacing: 0.05em; }
        td { padding: 12px; border-bottom: 1px solid #f1f5f9; font-size: 0.9rem; }

        .btn-group { display: flex; gap: 6px; }
        .btn-in { background: #dcfce7; color: #166534; padding: 8px 12px; border-radius: 6px; font-weight: bold; border: 1px solid #bbf7d0; cursor: pointer; flex: 1; text-align: center; }
        .btn-out { background: #fee2e2; color: #991b1b; padding: 8px 12px; border-radius: 6px; font-weight: bold; border: 1px solid #fecaca; cursor: pointer; flex: 1; text-align: center; }
        
        #search { width: 100%; padding: 12px; border: 1px solid #e2e8f0; border-radius: 8px; margin-bottom: 15px; box-sizing: border-box; font-size: 1rem; }
        input[type="number"], input[type="text"] { width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 8px; margin: 10px 0; font-size: 1rem; box-sizing: border-box; }

        .req-item { padding: 12px; border-radius: 8px; margin-bottom: 10px; border: 1px solid #e2e8f0; background: #fff; }
        .badge { font-size: 0.7rem; padding: 3px 8px; border-radius: 4px; font-weight: bold; text-transform: uppercase; }
        .badge-pending { background: #fef3c7; color: #92400e; }
        .badge-approved { background: #dcfce7; color: #166534; }
        .badge-rejected { background: #fee2e2; color: #991b1b; }

        .modal-overlay {
            display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.6); z-index: 100; align-items: center; justify-content: center; padding: 20px; box-sizing: border-box;
        }
        .modal-content { background: white; padding: 25px; border-radius: 16px; width: 100%; max-width: 350px; text-align: center; }

        .btn-submit { background: var(--primary); color: white; border: none; padding: 14px; width: 100%; border-radius: 8px; font-weight: bold; cursor: pointer; }
        .btn-logout { background: #ef4444; color: white; padding: 8px 15px; border-radius: 6px; cursor: pointer; font-weight: bold; border: none; }

        @media (max-width: 900px) {
            .container { grid-template-columns: 1fr; margin: 1rem 0; }
            table thead { display: none; }
            table tr { display: block; border-bottom: 2px solid #f1f5f9; padding: 10px 0; }
            table td { display: block; text-align: left; padding: 5px 0; border: none; }
            table td:last-child { margin-top: 10px; }
            .btn-group { width: 100%; }
        }
    </style>
</head>
<body>

<header>
    <div style="font-weight: 800; font-size: 1.2rem; color: var(--primary);">ðŸ“¦ StockPro</div>
    <button class="btn-logout" onclick="logout()">Logout</button>
</header>

<div class="container">
    <div class="section-card">
        <div class="card-header">
            <h3 style="margin:0">Inventory</h3>
            <button onclick="openNewProductModal()" style="background:var(--success); color:white; border:none; padding:8px 12px; border-radius:6px; font-weight:bold; cursor:pointer; font-size:0.8rem;">+ New Item</button>
        </div>
        
        <input id="search" placeholder="ðŸ” Search products..." onkeyup="searchProduct()">
        
        <table>
            <thead>
                <tr>
                    <th>Product Details</th>
                    <th>Stock</th>
                    <th style="text-align:right">Actions</th>
                </tr>
            </thead>
            <tbody id="productList">
                </tbody>
        </table>
    </div>

    <div class="section-card">
        <h3 style="margin-bottom:15px">My Activity</h3>
        <div id="myRequests"></div>
    </div>
</div>

<div id="actionModal" class="modal-overlay">
    <div class="modal-content">
        <div id="modalTypeBadge" class="badge" style="margin-bottom:10px;"></div>
        <h3 id="modalProdName" style="margin:5px 0"></h3>
        <input type="number" id="reqQty" placeholder="Enter quantity" inputmode="numeric">
        <input type="text" id="reqNote" placeholder="Add a note (e.g. Broken item, Restock)" style="font-size: 0.85rem; margin-bottom: 10px;">
        <div style="display:flex; gap:10px; margin-top:15px;">
            <button onclick="closeModals()" style="flex:1; background:#f1f5f9; border:none; padding:12px; border-radius:8px; cursor:pointer; font-weight:bold;">Cancel</button>
            <button class="btn-submit" id="mainSubmitBtn" onclick="submitStockRequest()" style="flex:1; margin:0;">Confirm</button>
        </div>
    </div>
</div>

<div id="newProductModal" class="modal-overlay">
    <div class="modal-content">
        <h3>New Item Request</h3>
        <input type="text" id="newProdName" placeholder="Product Name (e.g. Laptop Charger)">
        <input type="text" id="newProdSize" placeholder="Size/Model (e.g. XL, 65W, 15-inch)">
        <input type="number" id="newProdQty" placeholder="Starting Stock Quantity">
        <button class="btn-submit" style="background:var(--success)" onclick="submitNewProductRequest()">Submit Request</button>
        <button onclick="closeModals()" style="width:100%; background:none; border:none; color:#64748b; margin-top:15px; cursor:pointer;">Close</button>
    </div>
</div>

<script type="module" src="js/employee.js"></script>
</body>
</html>
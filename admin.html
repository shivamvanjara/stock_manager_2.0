<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>StockPro | Admin Console</title>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600;700;800&display=swap" rel="stylesheet">
    <style>
        :root {
            --admin-primary: #0f172a;
            --success: #10b981;
            --danger: #f43f5e;
            --bg: #f8fafc;
        }

        body { margin: 0; font-family: 'Plus Jakarta Sans', sans-serif; background: var(--bg); color: #1e293b; }
        
        header { 
            background: var(--admin-primary); color: white; padding: 1rem 2rem; 
            display: flex; justify-content: space-between; align-items: center;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            position: sticky; top: 0; z-index: 100;
        }

        .container { max-width: 1200px; margin: 2rem auto; padding: 0 20px; }
        
        /* Stats Grid */
        .stats-container { margin-bottom: 30px; }
        .stats-grid { 
            display: grid; 
            grid-template-columns: repeat(4, 1fr); 
            gap: 15px; 
            margin-bottom: 15px;
        }
        .stat-card { 
            background: white; padding: 15px; border-radius: 12px; 
            box-shadow: 0 4px 6px -1px rgba(0,0,0,0.05);
            border-bottom: 4px solid #cbd5e1;
        }
        .stat-card.in { border-color: var(--success); }
        .stat-card.out { border-color: var(--danger); }
        
        .stat-val { font-size: 1.5rem; font-weight: 800; margin-top: 5px; color: #1e293b; }
        .stat-label { font-size: 0.65rem; font-weight: 700; color: #64748b; text-transform: uppercase; letter-spacing: 0.5px; }

        /* Main Layout */
        .dashboard-grid { 
            display: grid; 
            grid-template-columns: 1fr 350px; 
            gap: 30px; 
            align-items: start;
        }
        
        .section-card { 
            background: white; border-radius: 20px; padding: 25px; 
            box-shadow: 0 10px 15px -3px rgba(0,0,0,0.04); border: 1px solid #e2e8f0;
            margin-bottom: 30px;
        }

        .section-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; }
        h3 { margin: 0; font-weight: 800; display: flex; align-items: center; gap: 10px; }
        
        /* Add Product Form */
        .add-form-container {
            display: grid; 
            grid-template-columns: 1.5fr 1fr 80px 120px; 
            gap: 10px; 
            margin-bottom: 25px;
            background: #f1f5f9;
            padding: 15px;
            border-radius: 15px;
        }

        input { padding: 12px 16px; border: 2px solid #f1f5f9; border-radius: 12px; width: 100%; box-sizing: border-box; font-family: inherit; }
        input:focus { outline: none; border-color: var(--admin-primary); background: white; }

        .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 20px; }
        .prod-card { background: #f8fafc; padding: 15px; border-radius: 15px; border: 1px solid #e2e8f0; }
        .stock-badge { font-weight: 800; font-size: 1.2rem; display: block; }
        
        .req-item { background: #fff; padding: 15px; border-radius: 12px; margin-bottom: 12px; border: 1px solid #f1f5f9; }
        
        button { padding: 10px 18px; border: none; border-radius: 10px; font-weight: 700; cursor: pointer; font-family: inherit; transition: 0.2s; white-space: nowrap; }
        .btn-add { background: var(--admin-primary); color: white; width: 100%; }
        .btn-export { background: #059669; color: white; font-size: 0.75rem; }
        .btn-approve { background: #dcfce7; color: #166534; }
        .btn-reject { background: #fee2e2; color: #991b1b; }
        .logout { background: #334155; color: white; font-size: 0.8rem; }
        button:hover { opacity: 0.9; transform: translateY(-1px); }

        /* --- MOBILE OPTIMIZATIONS --- */
        @media (max-width: 900px) { 
            .dashboard-grid { 
                display: flex; 
                flex-direction: column; 
            }
            
            /* Move Pending Actions to TOP on mobile */
            #pending-section { 
                order: -1; 
                margin-bottom: 20px;
            }

            .stats-grid { grid-template-columns: repeat(2, 1fr); }

            .add-form-container {
                grid-template-columns: 1fr; /* Stack inputs vertically */
                gap: 8px;
            }

            header { padding: 1rem; }
        }
    </style>
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#0f172a">
    <meta name="apple-mobile-web-app-capable" content="yes">
</head>
<body>

<header>
    <div style="font-weight: 800; letter-spacing: -1px;">STOCKPRO <span style="font-weight: 400; opacity: 0.7;">ADMIN</span></div>
    <button class="logout" onclick="logout()">Sign Out</button>
</header>

<div class="container">
    
    <div class="stats-container">
        <div class="stats-grid">
            <div class="stat-card in">
                <div class="stat-label">Today In</div>
                <div id="inToday" class="stat-val">0</div>
            </div>
            <div class="stat-card in">
                <div class="stat-label">Last 7d In</div>
                <div id="in7" class="stat-val">0</div>
            </div>
            <div class="stat-card in">
                <div class="stat-label">Month In</div>
                <div id="inMonth" class="stat-val">0</div>
            </div>
            <div class="stat-card in">
                <div class="stat-label">Prev In</div>
                <div id="inPrev" class="stat-val">0</div>
            </div>
        </div>

        <div class="stats-grid">
            <div class="stat-card out">
                <div class="stat-label">Today Out</div>
                <div id="outToday" class="stat-val">0</div>
            </div>
            <div class="stat-card out">
                <div class="stat-label">Last 7d Out</div>
                <div id="out7" class="stat-val">0</div>
            </div>
            <div class="stat-card out">
                <div class="stat-label">Month Out</div>
                <div id="outMonth" class="stat-val">0</div>
            </div>
            <div class="stat-card out">
                <div class="stat-label">Prev Out</div>
                <div id="outPrev" class="stat-val">0</div>
            </div>
        </div>
    </div>

    <div class="dashboard-grid">
        <div id="inventory-section">
            <div class="section-card">
                <div class="section-header">
                    <h3>ðŸ“¦ Inventory Control</h3>
                    <button class="btn-export" onclick="downloadTransactions()">ðŸ“¥ CSV Report</button>
                </div>
                
                <div class="add-form-container">
                    <input id="pname" placeholder="Product Name">
                    <input id="psize" placeholder="Size / ID">
                    <input id="pstock" type="number" placeholder="Qty">
                    <button class="btn-add" onclick="addProduct()">Add Item</button>
                </div>
                
                <input id="search" placeholder="ðŸ” Search through 100+ items..." onkeyup="searchProduct()">
                <div id="products" class="grid"></div>
            </div>
        </div>

        <div id="pending-section">
            <div class="section-card" style="border-top: 4px solid var(--admin-primary);">
                <h3>ðŸ”” Pending Actions</h3>
                <div id="requests" style="margin-top: 15px;"></div>
            </div>
        </div>
    </div>
</div>

<script type="module" src="js/admin.js"></script>
</body>
</html>